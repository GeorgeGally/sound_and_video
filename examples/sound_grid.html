<!DOCTYPE html>
<html>
<title>Creative Coding Yea!</title>
<head>
<meta charset="utf-8">
<script language="javascript" src="../js/creative_coding.js"></script>
<script language="javascript" src="../js/canvas.js"></script>


<script language="javascript" src="../js/vector.js"></script>
<script language="javascript" src="../js/particle_engine.js"></script>
<script language="javascript" src="../js/soundcloud.js"></script>

<link rel="stylesheet" href="../css/reset.css" type="text/css" media="screen" />
<link rel="stylesheet" href="../css/style.css" type="text/css" media="screen" />
<link rel="stylesheet" href="../css/audio.css" type="text/css" media="screen" />

</head>
<body>

<script>

var ctx = createCanvas("canvas1");
var Sound = new soundCloud(256);
  var particles = [];
  ctx.lineWidth = 1;
  var gx, gy;
  var engine;

  function reset() {
    console.log("reset");
    gx = randomInt(2, 15);
    gy = 25;
    engine = new particleEngine(gx, gy);
  }

  reset();

  function draw() {
    if (chance(200)) reset();
    ctx.background(255);
    for (var i=0; i < engine.particles.length; i++){
      var p = engine.particles[i];
      var vol = Sound.mapSound(i, engine.particles.length, 0, 3);
      ctx.fillStyle = rgb(0);
      ctx.fillRect(p.pos.x - (engine.grid.spacing_x -10)/2, p.pos.y - vol/2, engine.grid.spacing_x -5, vol);
      p.pos.y += vol;
      if(p.pos.y > h) p.pos.y = 0;
    }

  }


</script>

</body>

</html>
